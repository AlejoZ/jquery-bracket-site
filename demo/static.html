<html>
<head>
<script type="text/javascript" src="../deps/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="../jquery.bracket.js"></script>
<link rel="stylesheet" type="text/css" href="../bracket.css" />
<style>h1, h2 { clear: both; }</style>
<script type="text/javascript">
var results16 = {  
    teams : [
      ["Team 1",  "Team 2" ],
      ["Team 3",  "Team 4" ],
      ["Team 5",  "Team 6" ],
      ["Team 7",  "Team 8" ],
      ["Team 11", "Team 12"],
      ["Team 13", "Team 14"],
      ["Team 15", "Team 16"],
      ["Team 17", "Team 18"]
    ],
    results : [[
      [[3, 5], [2, 4], [6, 3], [2, 3], [1, 5], [5, 3], [7, 2], [1, 2]],
      [[1, 2], [3, 4], [5, 6], [7, 8]],
      [[9, 10], [11, 12]],
      [[16, 14]]
    ], [
      [[5, 1],[1, 2],[3, 2],[6, 9]],
      [[8, 2],[1, 2],[6, 2],[1, 3]],
      [[1, 2],[3, 1]],
      [[3, 0],[1, 9]],
      [[3, 2]],
      [[4, 2]]
    ], [
      [[3, 8]]
    ]]
  }

var results8 = {  
    teams : [
      ["Team 1",  "Team 2" ],
      ["Team 3",  "Team 4" ],
      ["Team 5",  "Team 6" ],
      ["Team 7",  "Team 8" ]
    ],
    results : [[
      [[2, 1], [2, -1], [2, 0], [null, null]],
      [[2, 1], [null, null]],
    ], [
      [[2, 1], [null, null], [1, 2]],
      [[null, null], [null, null], [0, 1]]
    ]]
  }

var results4 = {  
    teams : [
      ["Team 1",  "Team 2" ],
      ["Team 3",  "Team 4" ]
    ],
    results : [[
      [[2, 1], [8, 4]],
      [[9, 2]]
    ], 
      []
    ]
  }

var results4s = {  
    teams : [
      [{name: "Team 1", flag: 'se'}, {name: "Team 2", flag: 'kr'}],
      [{name: "Team 3", flag: 'se'}, {name: "Team 4", flag: 'kr'}]
    ],
    results : []
  }

var results8s = {  
    teams : [
      ["Team 1",  "Team 2" ],
      ["Team 3",  "Team 4" ],
      ["Team 5",  "Team 6" ],
      ["Team 7",  "Team 8" ]
    ],
    results : []
  }

function edit_fn(container, data, doneCb) {
  var input = $('<input type="text">')
  input.val(data.name)

  container.html(input)

  input.focus()
  input.blur(function() { doneCb({flag: data.flag, name: input.val()}) })
  input.keyup(function(e) {
      if ((e.keyCode || e.which) === 13)
        doneCb({flag: data.flag, name: input.val()})
    })
}

function render_fn(container, data, score) {
  if (!data.flag || !data.name)
    return
  container.append('<img src="'+data.flag+'.gif" /> ')
  container.append(data.name)
}

$(document).ready(function() {
    bracket({id: 'b4s', init: results4s, save: function(){}, 
             decorator: {edit: edit_fn, render: render_fn}})
    bracket({id: 'b4',  init: results4,  save: function(){}})
    bracket({id: 'b8',  init: results8,  save: function(){}})
    bracket({id: 'b8s', init: results8s, save: function(){}})
    bracket({id: 'b16', init: results16, save: function(){}})
  })
</script>
</head>
<body>
<h1>Static brackets from JSON objects</h1>
<p>Editing is enabled here for demo purposes. Changes are lost on reload.</p>
<h2>4 team single elimination with team customization</h2>
<div id="b4s"></div>
<h2>Double elimination with max 4 teams</h2>
<div id="b4"></div>
<h2>Single elimination with max 8 teams</h2>
<div id="b8s"></div>
<h2>Double elimination with max 8 teams</h2>
<div id="b8"></div>
<h2>Double elimination with max 16 teams</h2>
<div id="b16"></div>
</body>
</html>
